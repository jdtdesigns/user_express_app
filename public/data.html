<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Application Data</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <a href="/">Go Back</a>
  <br>
  <br>

  <main class="row">
    <section class="user-output col">
      <h1>Users:</h1>
      <hr>
    </section>

    <section class="book-output col">
      <h1>Books:</h1>
      <hr>
    </section>
  </main>

  <script>
    async function getUsers() {
      return fetch('/api/users')
        .then(res => res.json())
    }

    async function getBooks() {
      return fetch('/api/books')
        .then(res => res.json())
    }

    const promiseData = Promise.all([getUsers(), getBooks()]);

    async function outputData() {
      const [users, books] = await promiseData;
      const userOutput = document.querySelector('.user-output');
      const bookOutput = document.querySelector('.book-output');

      users.forEach(usrObj => {
        userOutput.insertAdjacentHTML('beforeend', `
        <div>
          <h3>Name: ${usrObj.username}</h3>
          <p>Email: ${usrObj.email}</p>
        </div>
        `);
      });

      books.forEach(bookObj => {
        bookOutput.insertAdjacentHTML('beforeend', `
        <div>
          <h3>Title: ${bookObj.title}</h3>
          <p>Author: ${bookObj.author}</p>
          <p>Release Date: ${bookObj.release_date}</p>
        </div>
        `);
      });
    }

    outputData();
  </script>
</body>
</html>