<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User App API Documentation</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <p class="message text-center hide"></p>

  <h1 class="text-center">User App API</h1>
  <p class="text-center">Welcome to our API! You'll find the usage instructions below.</p>

  <div class="row justify-center">
    <a href="/create/user">Create a User</a>
    <a href="/create/book">Add a Book</a>
  </div>

  <h3>User Routes:</h3>
  <p><span>GET /api/users</span> - Returns all users from the database</p>
  <p><span>GET /api/users/{USER_ID}</span> - Get user by id from the database</p>
  <p><span>GET /api/users/{USER_ID}</span> - Get user by id from the database</p>
  <p><span>GET /api/users/books</span> - Get all users and their associated books</p>
  <p><span>GET /api/user/books?user_id={ID}</span>  - Get one user and their associated books</p>
  <p><span>POST /api/user/{USER_ID}</span> {JSON Object that includes username, email and password} - Add new user to the database</p>
  <p><span>DELETE /api/user/{USER_ID}</span> - Remove a user from the database</p>

  <h3>Book Routes:</h3>
  <p><span>GET /api/books</span> - Returns all books from the database and the associated users</p>
  <p><span>GET /api/book/{BOOK_ID}</span> - Returns one book from the database by ID and the associated user</p>
  <p><span>GET /api/book/search?title={QUERY}</span> - Returns all books from the database by title search</p>
  <p><span>POST /api/books</span> {JSON Object that includes title, author and release_date} - Create a book in the database</p>
  <p><span>DELETE /api/book/{BOOK_ID}</span> - Remove a book from the database by ID</p>

  <script>
    const user_added = window.location.search.includes('user_added');
    const book_added = window.location.search.includes('book_added');

    if (user_added || book_added) {
      const messageEl = document.querySelector('.message');
      const message = user_added ? 'User added successfully!' : 'Book added successfully!';

      messageEl.innerText = message;
      messageEl.classList.remove('hide');

      setTimeout(() => {
        messageEl.classList.add('hide');
      }, 4000);
    }
  </script>
</body>
</html>